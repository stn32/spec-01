# Техническое задание на разработку мобильного приложения интернет-магазина

## Общие требования
- Кроссплатформенное приложение (iOS в приоритете, затем Android).
- Интеграция с текущей системой: WordPress + WooCommerce + CRM "МойСклад".
- Поддержка 1000+ товаров с возможностью масштабирования.
- Базовый функционал стандартного интернет-магазина.

## Основной функционал
- Каталог товаров
- Категории и подкатегории (древовидная структура).
- Фильтрация товаров по:
  - Цене (диапазон)
  - Популярности
  - Рейтингу
  - Атрибутам (цвет, размер, бренд и др.)
- Сортировка товаров по:
  - Цене (↑/↓)
  - Дате добавления
  - Рейтингу
  - Популярности

## Карточка товара
- Фотогалерея (карусель изображений).
- Название, описание, артикул.
- Вариации товара (цвет, размер и др.).
- Наличие на складе.
- Таблица размеров.
- Кастомные апсейлы и кроссейлы.
- Сопутствующие товары.
- Недавно просмотренные товары.
- Характеристики.
- Кнопки:
  - Добавить в корзину
  - В избранное
  - Быстрый заказ

## Корзина
- Добавление/удаление товаров.
- Изменение количества.
- Промокоды и бонусные баллы.
- Расчет стоимости с доставкой.

## Оформление заказа
- Выбор способа доставки (курьер, самовывоз, пункт выдачи).
- Указание адреса (с автодополнением).
- Выбор способа оплаты:
  - Робокасса (карты, электронные кошельки)
  - Долями
  - Частями (Сбер)
  - Подтверждение заказа (чек, уведомление).

## Личный кабинет
- Регистрация/авторизация (email/телефон + пароль, соцсети).
- Профиль пользователя:
  - Личные данные (имя, контакты)
  - Смена пароля
  - Настройки уведомлений 
- История заказов:
  - Список заказов
  - Детализация (статус, трек-номер)
  - Возвраты/отмена
- Избранное (список желаний).
- Бонусная система:
  - Баланс баллов
  - История начислений/списаний
  - Условия программы лояльности
  - Возможность списания бонусов при заказе (добавление условий списания)
- Подписка на рассылку (новости, акции).

## Дополнительные функции
- Поиск по каталогу (с автозаполнением).
- Уведомления (PUSH, email) о статусе заказа, акциях.
- Отзывы и рейтинги товаров.
- Возможность оформить возврат.
- FAQ / Помощь.

## Интеграции
- CRM "МойСклад" (учет остатков, товаров, заказов).
- Платежные системы - Робокасса, Долями, СберЧастями.
- Вход по смс - voicepassword.ru
- Сервисы доставки (СДЭК).

## Технические требования
- База данных: синхронизация с WordPress.
- Кэширование для ускорения работы.
- Аналитика: Google / Yandex.
- Безопасность: HTTPS, защита персональных данных.

### Frontend:
- Mobile: React Native
- Styling: CSS-in-JS / Tailwind
- State Management: Redux Toolkit / MobX

### Backend:
- Node.js (Express/Nest.js) + MySQL
- RESTful API

### Server:
- Hosting: VPS
- Web Server: Nginx / Apache

### Database: 
- Primary: MySQL
- Caching: Redis or Memcached

## Этапы разработки
- Проектирование UI/UX (прототипы, дизайн).
- Разработка MVP (основной функционал).
- Тестирование (баги, нагрузка).
- Публикация в App Store (первоочередно) и Google Play.
- Поддержка и обновления.

--- 

# Техническое задание на разработку гибридной бонусной системы с использованием MySQL для WooCommerce и React Native приложения

## Общие требования
### Цель - Создание отказоустойчивой бонусной системы для интернет-магазина с:
- Интеграцией в существующий WooCommerce-сайт (MySQL)
- Поддержкой мобильного приложения (React Native)
- Гибкими правилами начисления/списания баллов

### Стек технологий:
- Backend: Node.js (Express/Nest.js) + MySQL
- Frontend (приложение): React Native
- Сайт: PHP (WooCommerce плагин)
- Сервер: Ubuntu + Nginx

## Функциональные требования
### Ядро системы (Node.js API)
**Модуль пользователя:**
- Регистрация/авторизация (JWT)
- Начисление баллов за:
  - Покупки (настраиваемый % от суммы)
  - Регистрацию
  - Отзывы
  - Участие в акциях
- Списание баллов:
  - Оплата до 30% суммы заказа
  - Обмен на промокоды
- История операций
- Модуль администратора:
  - CRUD для правил начисления
  - Ручное управление балансами
- Экспорт статистики (CSV/Excel)
- API Endpoints:

| Метод | Путь                    |	Описание         |
| ----- | ----------------------- | ---------------- |
| POST  | /api/auth/login         |	Авторизация      |
| GET   | /api/user/balance       |	Получить баланс  |
| POST  | /api/transactions/add   |	Начислить баллы  |
| POST  | /api/transactions/spend |	Списать баллы    |

### WooCommerce интеграция
`add_action('woocommerce_order_status_completed', 'add_bonus_points');`

- Шорткод [bonus_balance] для личного кабинета
- Виджет "Бонусы" на странице товара


### Мобильное приложение
- Экран "Мои бонусы"
- Уведомления о сгорании баллов
- QR-код для применения баллов в оффлайн-магазинах


### Требования к БД (MySQL)
**Схема базы данных**
```
`CREATE TABLE `users` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `email` VARCHAR(255) UNIQUE,
  `password_hash` VARCHAR(255)
);

CREATE TABLE `bonus_accounts` (
  `user_id` INT,
  `balance` DECIMAL(10,2),
  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`)
);

CREATE TABLE `transactions` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `user_id` INT,
  `amount` DECIMAL(10,2),
  `type` ENUM('accrual', 'redemption'),
  `created_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (`user_id`) REFERENCES `users`(`id`)
);`
```

### Оптимизации
- Индексы для частых запросов:
```CREATE INDEX idx_user_transactions ON `transactions` (`user_id`, `created_at`);```
- Репликация Master-Slave для отказоустойчивости

## Нефункциональные требования

### Производительность:
- Обработка 100+ транзакций/сек
- Response time API < 500 мс

### Безопасность:
- HTTPS + CORS
- Хеширование паролей (bcrypt)

### Масштабируемость:
- Возможность добавления новых правил без изменения схемы БД

## Этапы разработки

### Этап 1. Прототипирование
- Схема БД
- Документация API
- Макеты интерфейсов

### Этап 2. Backend
- Ядро на Node.js
- Интеграция с MySQL
- Unit-тесты (Jest)

### Этап 3. WooCommerce модуль
- Плагин для начисления баллов
- Виджеты для сайта

### Этап 4. Мобильное приложение
- Экран баланса
- PUSH-уведомления

### Этап 5. Тестирование
- Нагрузочные тесты (k6)
- Проверка синхронизации

### Критерии приемки
- Работает нагруженность 1000 RPS
- Нет расхождений баланса между сайтом и приложением
- Админка позволяет менять правила без перезапуска
